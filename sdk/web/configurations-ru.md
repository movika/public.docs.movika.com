---
title: Конфигурации
description: Конфигурации
keywords: Конфигурации
sort: 1
---

# Конфигурации

### Из библиотеки movika-player экспортируются следующие классы и объекты:

1. **Player** - предназначен для воспроизведения медиа.
2. **ControlsOverlay** - предназначен для отображения элементов плеера.
3. **Interactives** - предназначен для отображения игровых ("интерактивных") элементов плеера.
4. **Events** - содержит список доступных событий для подписки.
5. **utils** - содержит список вспомогательных функций для реализации кастомных интерактивов.

## **Player**

### Конструктор Player:

```
  new Player(mediaElement, playerOptions)
```

### Параметры Player:

| Наименование  | Обязательный | Тип              | По умолчанию | Описание            |
| ------------- | ------------ | ---------------- | ------------ | ------------------- |
| mediaElement  | Да           | HTMLVideoElement | -            | DOM-элемент         |
| playerOptions | Да           | Object           | -            | Конфигурации плеера |

### Параметры playerOptions:

| Наименование       | Обязательный | Тип              | По умолчанию | Описание                                                                                                                                                                   |
| ------------------ | ------------ | ---------------- | ------------ | -------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| src                | Да           | String \| Object | -            | Указывает URL-адрес видеофайла или манифеста интерактивного фильма. Поддерживает .m3u8, .mp4, .json расширения. Также работает с объектом манифеста интерактивного фильма. |
| apiKey             | Да           | String           | -            | apiKey, полученный после регистрации приложения в [Movika Developer](https://developer.movika.com)                                                                         |
| appName            | Да           | String           | -            | appName, полученный после регистрации приложения в [Movika Developer](https://developer.movika.com)                                                                        |
| preferredExtension | Нет          | String           | m3u8         | Предпочтительное расширение файла для воспроизведения. Доступные значения: mp4 и m3u8                                                                                      |
| initialChapter     | Нет          | String           | -            | Идентификатор главы, указывающий с какой главы нужно начать воспроизведение                                                                                                |
| initialHistory     | Нет          | Object           | -            | Если передан валидный объект истории, то плеер продолжит записывать историю в этот объект. Если объект истории невалидный, создаст новый объект истории.                   |
| autoplay           | No           | boolean          | -            | Указывает, что видео начнет воспроизводиться, как только оно будет готово.                                                                                                 |
| loop               | No           | boolean          | -            | Указывает, что видео будет начинаться заново после того, как он закончится.                                                                                                |
| width              | No           | Number           | -            | Устанавливает ширину видеоплеера в пикселях.                                                                                                                               |
| height             | No           | Number           | -            | Устанавливает высоту видеоплеера в пикселях.                                                                                                                               |
| muted              | No           | boolean          | -            | Указывает, что звук у видео должен быть отключен.                                                                                                                          |
| controls           | No           | boolean          | -            | Указывает, что должны отображаться дефолтные элементы управления HTMLVideoElement.                                                                                         |

### Методы Player:

#### destroy()

Удаляет все слушатели и очищает все свойства экземпляра класса Player.

```
  const mp = new Player(mediaElement, playerOptions)
  ...
  mp.destroy()
  ...
```

#### getHistory()

Возвращает историю интерактивного фильма.

```
  const mp = new Player(mediaElement, playerOptions)
  ...
  const hist = mp.getHistory()
  ...
```

#### attachManifest(manifest, initialChapter)

Прикрепляет новый манифест. Старый манифест автоматически отсоединяется.

Параметры:

| Наименование   | Обязательный | Тип              | Описание                                                                    |
| -------------- | ------------ | ---------------- | --------------------------------------------------------------------------- |
| manifest       | Да           | String \| Object | Ссылка или объект на манифест интерактивного фильма                         |
| initialChapter | Нет          | String           | Идентификатор главы, указывающий с какой главы нужно начать воспроизведение |

```
  const mp = new Player(mediaElement, playerOptions)
  ...
  mp.attachManifest(manifest, initialChapter)
  ...
```

#### play()

Видеоплеер начинает воспроизведение

```
  const mp = new Player(mediaElement, playerOptions)
  ...
  mp.play()
  ...
```

#### pause()

Видеоплеер останавливает воспроизведение

```
  const mp = new Player(mediaElement, playerOptions)
  ...
  mp.pause()
  ...
```

#### mute()

Отключает звук в видеоплеере

```
  const mp = new Player(mediaElement, playerOptions)
  ...
  mp.mute()
  ...
```

#### unmute()

Включает звук в видеоплеере

```
  const mp = new Player(mediaElement, playerOptions)
  ...
  mp.unmute()
  ...
```

## **ControlsOverlay**

### Конструктор ControlsOverlay:

```
  new ControlsOverlay(playerInstance, containerElement, controlsOverlayOptions)
```

### Параметры ControlsOverlay:

| Наименование           | Обязательный | Тип            | По умолчанию | Описание                                                                                                 |
| ---------------------- | ------------ | -------------- | ------------ | -------------------------------------------------------------------------------------------------------- |
| playerInstance         | Да           | playerInstance | -            | Экземпляр класса Player                                                                                  |
| containerElement       | Да           | HTMLElement    | -            | Элемент, внутри которого будут находится сам плеер, элементы управления плеера и игровые элементы плеера |
| controlsOverlayOptions | Нет          | Object         | -            | Конфигурации ControlsOverlay                                                                             |

### Параметры controlsOverlayOptions:

| Наименование     | Обязательный | Тип     | По умолчанию | Описание                         |
| ---------------- | ------------ | ------- | ------------ | -------------------------------- |
| width            | Нет          | String  | 100%         | Ширина контейнера                |
| height           | Нет          | String  | 100%         | Высота контейнера                |
| endOfVideoScreen | Нет          | Boolean | false        | Показать элемент окончания видео |

### Методы ControlsOverlay:

#### destroy()

Удаляет все слушатели и очищает все свойства экземпляра класса ControlsOverlay.

```
  const co = new ControlsOverlay(playerInstance, containerElement, controlsOverlayOptions)

  // destroy method
  co.destroy()
```

## Interactives

### Конструктор ControlsOverlay:

```
  new Interactives(playerInstance, controlOverlayInstance)
```

### Параметры:

| Наименование            | Обязательный | Тип                     | По умолчанию | Описание                         |
| ----------------------- | ------------ | ----------------------- | ------------ | -------------------------------- |
| playerInstance          | Да           | playerInstance          | -            | Экземпляр класса Player          |
| controlsOverlayInstance | Да           | controlsOverlayInstance | -            | Экземпляр класса ControlsOverlay |

### Методы ControlsOverlay:

#### addFactory(type, fn)

Добавляет пользовательский интерактив (контейнер) в список доступных интерактивов (контейнеров)

Параметры

| Наименование | Обязательный | Тип      | Описание                                                                        |
| ------------ | ------------ | -------- | ------------------------------------------------------------------------------- |
| type         | Да           | String   | Уникальный тип пользовательского интерактива                                    |
| fn           | Да           | Function | Функция для создания объектов пользовательского интерактива основываясь на type |

```
  const mi = new Interactives(playerInstance, controlOverlayInstance)

  // add new interactive
  mi.addFactory('type', (container) => {
    if (container.type.trim().toLowerCase() === 'type') {
		  return new MyInteractive(container)
	  }
  })
```

#### removeFactory(type)

Удаляет пользовательский интерактив (контейнер) из списка доступных интерактивов (контейнеров)

Параметры

| Наименование | Обязательный | Тип    | Описание                                     |
| ------------ | ------------ | ------ | -------------------------------------------- |
| type         | Да           | String | Уникальный тип пользовательского интерактива |

```
  const mi = new Interactives(playerInstance, controlOverlayInstance)

  // remove interactive
  mi.removeFactory('type')
```

#### destroy()

Удаляет все слушатели и очищает все свойства экземпляра класса Interactives.

```
  const mi = new Interactives(playerInstance)

  // destroy method
  mi.destroy()
```

## utlis

### new Container(container)

#### Свойства:

| Наименование | Тип    | Описание                                                     |
| ------------ | ------ | ------------------------------------------------------------ |
| container    | Object | `Container` из манифеста                                     |
| factories    | Map    | Коллекция доступных фабричных функций для создания контролов |
| controls     | Array  | Список текущих контролов                                     |

#### Методы:

#### constructor(container)

Параметры

| Наименование | Обязательный | Тип    | Описание                 |
| ------------ | ------------ | ------ | ------------------------ |
| container    | Да           | Object | `Container` из манифеста |

#### run()

Сопоставляет типы контролов из текущего манифеста с переданными контролами - addControlFactory

#### addControlFactory(type, factoryFn)

Добавляет фабричную функцию для определенного контрола

Параметры

| Наименование | Обязательный | Тип      | Описание                                                                  |
| ------------ | ------------ | -------- | ------------------------------------------------------------------------- |
| type         | Да           | String   | Уникальный тип контрола                                                   |
| factoryFn    | Да           | Function | Функция для создания объекта определенного контрола основываясь на `type` |

#### removeControlFactory(type)

Удаляет фабричную функцию для определенного контрола

Параметры

| Наименование | Обязательный | Тип    | Описание                |
| ------------ | ------------ | ------ | ----------------------- |
| type         | Да           | String | Уникальный тип контрола |

### new ChoiceContainer(container)

#### Свойства:

| Наименование | Тип            | Описание                        |
| ------------ | -------------- | ------------------------------- |
| layout       | RelativeLayout | Экземпляр класса RelativeLayout |

#### Методы:

#### constructor(container)

Параметры

| Наименование | Обязательный | Тип    | Описание                                  |
| ------------ | ------------ | ------ | ----------------------------------------- |
| container    | Да           | Object | `Container` с типом `Choice` из манифеста |

#### createView(callback)

Создает представление и регистрирует обработчики событий

Параметры

| Наименование | Обязательный | Тип      | Описание                                                                                                                                   |
| ------------ | ------------ | -------- | ------------------------------------------------------------------------------------------------------------------------------------------ |
| callback     | Да           | Function | `callback` требует 1 обязательный аргумент - [action](../android/data-structure.md#структура-action) и вызывается при определенном событии |

#### removeView()

Удаляет HTMLElement контейнера

#### hide()

Скрывает HTMLElement контейнера

#### show()

Показывает HTMLElement контейнера, если он был ранее скрыт

#### getElement()

Возвращает HTMLElement контейнера

### new ButtonControl(control)

#### Свойства:

| Наименование | Тип    | Описание                                |
| ------------ | ------ | --------------------------------------- |
| control      | Object | `Control` с типом `Button` из манифеста |

#### Методы:

#### constructor(container)

Параметры

| Наименование | Обязательный | Тип    | Описание                                |
| ------------ | ------------ | ------ | --------------------------------------- |
| control      | Да           | Object | `Control` с типом `Button` из манифеста |

#### createView(options)

Создает представление контрола

Параметры

| Наименование     | Обязательный | Тип         | Описание                                                |
| ---------------- | ------------ | ----------- | ------------------------------------------------------- |
| options.parent   | Да           | HTMLElement | HTMLElement внутри которого будет располагаться контрол |
| options.layoutFn | Да           | Function    | Функция для применения стилей расположения контрола     |

#### setEvents(element, callback)

Регистрирует обработчики событий для контролов

Параметры

| Наименование | Обязательный | Тип         | Описание                                                      |
| ------------ | ------------ | ----------- | ------------------------------------------------------------- |
| element      | Да           | HTMLElement | HTMLElement для прослушивания событий                         |
| callback     | Нет          | Function    | Функция, которая будет вызываться после возникновения события |

#### getElements()

Возвращает HTMLElement контрола

### RelativeLayout()

#### Свойства:

| Наименование | Тип    | Описание                                          |
| ------------ | ------ | ------------------------------------------------- |
| layout       | Object | Свойство `Layout` с типом `Relative` из манифеста |

#### Методы:

#### constructor(layout)

Параметры

| Наименование | Обязательный | Тип    | Описание                                          |
| ------------ | ------------ | ------ | ------------------------------------------------- |
| layout       | Да           | Object | Свойство `Layout` с типом `Relative` из манифеста |

#### setContainerLayout(target)

Применяет стили к HTMLElement контейнера

Параметры

| Наименование | Обязательный | Тип         | Описание              |
| ------------ | ------------ | ----------- | --------------------- |
| target       | Да           | HTMLElement | Container HTMLElement |

#### setControlLayout(target, layoutParams)

Применяет стили к HTMLElement контрола

Параметры

| Наименование | Обязательный | Тип         | Описание                                      |
| ------------ | ------------ | ----------- | --------------------------------------------- |
| target       | Да           | HTMLElement | Control HTMLElement                           |
| layoutParams | Да           | Object      | Свойство `layoutParams` контрола из манифеста |

### createAreaControl(target, layoutParams)

Возвращает объект AreaControl

Параметры

| Наименование | Обязательный | Тип    | Описание                              |
| ------------ | ------------ | ------ | ------------------------------------- |
| control      | Да           | String | `Control` с типом `Area` из манифеста |

### createButtonControl(control)

Возвращает объект ButtonControl

Параметры

| Наименование | Обязательный | Тип    | Описание                                |
| ------------ | ------------ | ------ | --------------------------------------- |
| control      | Да           | String | `Control` с типом `Button` из манифеста |

### createChoiceContainer(container)

Возвращает объект ChoiceContainer

Параметры

| Наименование | Обязательный | Тип    | Описание                                  |
| ------------ | ------------ | ------ | ----------------------------------------- |
| container    | Да           | String | `Container` с типом `Choice` из манифеста |

### createRelativeLayout(layout)

Возвращает объект RelativeLayout

Параметры

| Наименование | Обязательный | Тип    | Описание                                          |
| ------------ | ------------ | ------ | ------------------------------------------------- |
| layout       | Да           | String | Свойство `layout` с типом `Relative` из манифеста |

### getRootEl()

Возвращает HTMLElement, где должны находиться все контейнеры
