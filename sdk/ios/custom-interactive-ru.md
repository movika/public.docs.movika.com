---
title: Пользовательские интерактивы
description: Пользовательские интерактивы
keywords: Пользовательские интерактивы
sort: 3
---

# Пользовательские интерактивы

Пользовательсике интерактивы имеют соственную реализацию вместо уже доступных. В рамках SDK создание интерактивов происходит через _фабрики_. Добавление пользовательских интерактивов происходит через стандартную реализацию **MKInteractivePlayer** и регистрацию в нем новых фабрик через через обращение к объекту класса **MKDefaultsEventsContainer** _eventsContainer_, и метода _register_, регистрирующий новый тип фабрики. Для регистрации новой фабрики требуется передать в метод _register_ тип фабрики, создание которого происходит через реализацию протокола **MKEventViewFactory**, который в свою очередь содержит вид нового интерактива, реализованный в протоколе **MKEventView** 

### MKEventView

Вид протокола
```
protocol MKEventView {
  // Действия кастомного интерактива
  var eventResultCompletion: MKEventResultCompletion? { get set }
  
  // Вид кастомного интерактива
  var view: UIView? { get }

  // Метод, вызываемый в момент когда интерактив должен исчезнуть
  func eventViewWillDisappear()
}
```
Данный протокол отвечает главным образом за поведение и вид интерактива. Действия описываются в _eventResultCompletion_, а вид в переменной _view_ соответственно. 

### MKEventViewFactory
Вид протокола
```
protocol MKEventViewFactory {
  // Метод, создающий новый тип фабрики
  func create(event: MKEvent, videoRect: CGRect) throws -> MKEventView?
}
```
Данный протокол за создание нового типа фабрики, реализующий новый пользовательский интерактив
___

Короткое описание схемы реализации кастомного интерактива: 

1) Создать **MKInteractivePlayer** и инициализировать его манифестом _(setManifestAsset)_ с типом кастомного интерактива либо назначить кастомный интерактив на уже использующийся в манифесте
2) Реализовать протокол **MKEventView** и описать вид кастомного интерактива через **UIView** и действие через _eventResultCompletion_
3) Реализовать протокол **MKEventViewFactory** и метод _create_, создающий новую фабрику
4) Зарегистировать в **MKInteractivePlayer** через метод _register_ новый тип фабрики. Метод _register_ вызывать через переменную _eventsContainer_

[Пример](https://pastebin.com/wi4raUfC) возможной реализации кастомного интерактива. _Кликабельно_

```
Манифест - JSON файл с данными видео. В рамках SDK интерактивы именуются контейнерами. Манифест содержит информацию о контейнерах: типе, количестве, времени появления, угасания, действиях и т.д. К примеру, тип интерактивов указан в контейнерах в графе "type", там же и указыватся название кастомного интерактива. 

Пример манифеста: https://pro-stage.movika.info/users/3525/projects/662/manifest-v3.json
```
