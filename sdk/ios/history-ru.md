---
title: История Интерактивов
description: История Интерактивов
keywords: История Интерактивов
sort: 4
---

В рамках **MovikaSDK** состояние прохождения интерактивного фильма находится в структуре **MKPlayerState**. В процессе работы с плеером может возникнуть необходимость использовать историю прохождения фильма в своем проекте, например, для сохранения выборов пользователем интерактивов или получения времени прохождения определенной главы. 

Просмотр и обновление истории взаимодействия пользователя с интерактивным фильмом происходит через реализацию делегата **MKPlayerDelegate** и вызова метода
```
func mkplayer(_ player: MKPlayer, didUpdate state: MKPlayerState)
```

*Через структуру **MKPlayerState** возможно получить следующую информацию о статусе интерактивного фильма:* 
1) ID Манифеста
2) Текущий ID главы
3) Текущее время на главе
4) ID следующей главы
5) Текущая история

# Иннициализация состояния фильма 
Для того чтобы после сохранения состояния структуры **MKPlayerState** иннициализировать интерактивный фильм с новой историей, требуется реализовать стандартный плеер **MKInteractivePlayer** и на этапе иннициализации с помощью метода **setManifestAsset** передать **MKPlayerState** напрямую вторым аргументом. Таким образом будет создан плеер с уже заранее сохраненной историей.

Метод **setManifestAsset** отвечает главным образом за иннициализацию интерактивного фильма манифестом, но также в нем доступна возможность сохранить состояние фильма. В случае, если второй аргумент не будет передан, структура **MKPlayerState** по умолчанию будет равна __nil__ и фильм будет проигрываться сначала.
```
func setManifestAsset(_ manifestAsset: MKManifestAsset, with playerState: MKPlayerState) 
```

(_Стоит быть внимательным, в случае если в структуре **MKPlayerState** в переменной *Chapter ID*, будет находится невалидный *ID*, произойдет __fatalError___ ) 
